## ç”¨åŸç”Ÿjså†™ä¸€ä¸ª"å¤šåŠ¨ç—‡"çš„ç®€å†

[é¢„è§ˆåœ°å€](https://qianlongo.github.io/resume-native/dist/)
[æºç åœ°å€](https://github.com/qianlongo/resume-native)

> æœ€è¿‘åœ¨çŸ¥ä¹ä¸Šçœ‹åˆ°@æ–¹åº”æ­ç”¨vueå†™äº†ä¸€ä¸ª[ä¼šåŠ¨çš„ç®€å†](https://zhuanlan.zhihu.com/p/25541520)ï¼Œè§‰å¾—æŒºå¥½ç©çš„ï¼Œç ”ç©¶ä¸€ä¸‹å…¶å®ç°æ€è·¯ï¼Œå†³å®šè¯•è¯•ç”¨åŸç”Ÿjsæ¥å®ç°ã€‚

![http://odssgnnpf.bkt.clouddn.com/return.gif](http://odssgnnpf.bkt.clouddn.com/160529jhf0hrzhffcl8jh4.jpg)


## ä¼šåŠ¨çš„ç®€å†å®ç°æ€è·¯

> è¿™å¼ ä¼š`åŠ¨`çš„ç®€å†ï¼Œå°±å¥½åƒä¸€ä¸ªæ‰“å­—å‘˜åœ¨ä¸æ–­åœ°å½•å…¥æ–‡å­—ï¼Œé¡µé¢å‘ˆç°åŠ¨æ€æ•ˆæœã€‚åˆå¥½åƒä¸€ä¸ªæ—©å·²ç»å½•åˆ¶å¥½å½±ç‰‡ï¼Œè€Œæˆ‘ä»¬åªæ˜¯ååœ¨æ”¾æ˜ æœºå‰è§‚çœ‹ã€‚

**åŸç†åˆ†ä¸¤ä¸ªéƒ¨åˆ†**

1. é¡µé¢èƒ½çœ‹è§çš„ä¸æ–­è·³åŠ¨ç€çš„å¢åŠ çš„æ–‡å­—ï¼Œç”±innerHTMLæ§åˆ¶
2. é¡µé¢çš„å¸ƒå±€æ•ˆæœç”±è—åœ¨"èƒŒåçš„"`style`æ ‡ç­¾å®Œæˆ

**æƒ³è±¡ä¸€ä¸‹ä½ è¦å¾€ä¸€å¼ ç½‘é¡µæ¯é—´éš”0.1ç§’å¢åŠ ä¸€ä¸ª`å•Š`å­—ï¼Œæ˜¯ä¸æ˜¯å¼€ä¸ªå®šæ—¶å™¨ï¼Œé—´æ–­åœ°å¾€bodyé‡Œé¢å¡`å•Š`ï¼Œå°±å¯ä»¥å•Šï¼æ²¡é”™ï¼Œåšåˆ°è¿™ä¸€æ­¥å°±å®Œæˆäº†åŸç†çš„ç¬¬ä¸€éƒ¨åˆ†**

**å†æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨å¾€é¡µé¢é‡Œé¢å¡`å•Š`çš„æ—¶å€™ï¼Œæˆ‘è¿˜æƒ³æ”¹å˜å•Šå­—çš„å­—ä½“é¢œè‰²ä»¥åŠç½‘é¡µèƒŒæ™¯é¢œè‰²ï¼Œé‚£åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Œæ˜¯ä¸æ˜¯æ‰§è¡Œä¸‹é¢çš„ä»£ç å°±å¯ä»¥å‘¢ï¼Œæ²¡é”™ï¼Œåªä¸è¿‡æ›´æ”¹å­—ä½“å’ŒèƒŒæ™¯è‰²ä¸æ˜¯çªç„¶æ”¹å˜çš„ï¼Œè€Œæ˜¯ä¹Ÿæ˜¯å¼€ä¸ªå®šæ—¶å™¨ï¼Œé—´æ–­åœ°å¾€`style`æ ‡ç­¾ä¸­å¡å…¥ä»¥ä¸‹ä»£ç ï¼Œè¿™æ ·å°±å®Œæˆäº†åŸç†çš„ç¬¬äºŒæ­¥ï¼Œæ˜¯ä¸æ˜¯å¥½ç®€å• ğŸ˜€ğŸ˜€ğŸ˜€ï¼Œ æ¥ä¸‹æ¥è®©æˆ‘ä»¬ä¸€æ­¥æ­¥å®Œæˆå®ƒ**

```style
.xxx{
  color: blue;
  background: red; 
}

```

## é¡¹ç›®æ­å»º

> åœ¨è¿™ä¸ªé¡¹ç›®ä¸­æˆ‘ä»¬

1. ä½¿ç”¨webpack2æ¥å®Œæˆé¡¹ç›®çš„æ„å»º
2. ä½¿ç”¨yarnæ¥å¤„ç†ä¾èµ–åŒ…çš„ç®¡ç†
3. ä½¿ç”¨es6çš„å†™æ³•
4. ä½¿ç”¨éƒ¨åˆ†åŸç”Ÿdomæ“ä½œapi
5. standard.js(ä»£ç é£æ ¼çº¦æŸåˆ©å™¨)

ç›®å½•ç»“æ„å¦‚ä¸‹

![ç›®å½•ç»“æ„](http://odssgnnpf.bkt.clouddn.com/QQ20170503-013138@2x.png)

æœ€é‡è¦çš„å‡ ä¸ªæ¨¡å—åˆ†åˆ«æ˜¯`resumeEditor(ç®€å†ç¼–è¾‘æ¨¡å—)` ã€ `stylesEditor(ç®€å†æ ·å¼ç¼–è¾‘æ¨¡å—)` ã€ `ä»¥åŠvQuery(å°è£…çš„domæ“ä½œæ¨¡å—)`
æœ€å`app.js(å…¥å£æ¨¡å—)`å†å°†å‡ ä¸ªæ¨¡å—çš„åŠŸèƒ½ç»“åˆèµ·æ¥å®Œæˆæ•´ä¸ªé¡¹ç›®ã€‚

## ä»¥åŠvQuery(å°è£…çš„domæ“ä½œæ¨¡å—)

> å› ä¸ºåé¢çš„å‡ ä¸ªæ¨¡å—éƒ½è¦ä¾èµ–è¿™ä¸ªå°æ¨¡å—ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆç®€å•çš„çœ‹ä¸‹ã€‚


``` javascript
class Vquery {
  constructor (selector, context) {
    this.elements = getEles(selector, context)
  }

  optimizeCb (callback) {
    ...
  }

  get (index) {
    ...
  }

  html (sHtml) {
    ...
  }

  addClass (iClass) {
    ...
  }

  css (styles) {
    ...
  }

  height (h) {
    ...
  }

  scrollTop (top) {
    ...
  }
}

export default (selector, context) => {
  return new Vquery(selector, context)
}


```

**å¯ä»¥çœ‹å‡ºå®ƒåšçš„äº‹å°±æ˜¯å°è£…ä¸€ä¸ªæ„é€ å‡½æ•°Vqueryï¼Œå®ƒçš„å®ä¾‹ä¼šæœ‰ä¸€äº›ç®€å•çš„domæ“ä½œæ–¹æ³•ï¼Œæœ€åä¸ºäº†èƒ½å¤ŸåƒjQueryé‚£æ ·ä½¿ç”¨$().funcNameçš„å½¢å¼å»ä½¿ç”¨ï¼Œæˆ‘ä»¬å¯¼å‡ºäº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œåœ¨åŒ¿åå‡½æ•°ä¸­å»new Vquery**

### stylesEditor(ç®€å†æ ·å¼ç¼–è¾‘æ¨¡å—)

> ç®€å†æ‰€å±•ç°çš„å¸ƒå±€æ•ˆæœéƒ½æ˜¯ç”±è¿™ä¸ªæ¨¡å—å®Œæˆçš„,æ ¸å¿ƒæ–¹å¼æ˜¯showStylesã€‚

``` javascript
const showStyles = (num, callback) => {
  let style = styles[num]
  let length
  let prevLength

  if (!style) {
    return
  }

  length = styles.filter((item, i) => { // è®¡ç®—æ•°ç»„styleså‰nä¸ªå…ƒç´ çš„é•¿åº¦
    return i <= num
  }).reduce((result, item) => {
    result += item.length
    return result
  }, 0)

  prevLength = length - style.length

  clearInterval(timer)
  timer = setInterval(() => {
    let start = currentStyle.length - prevLength
    let char = style.substring(start, start + 1) || ''
    currentStyle += char
    if (currentStyle.length === length) { // æ•°ç»„styleså‰nä¸ªå…ƒç´ å·²ç»å…¨éƒ¨å¡å…¥ï¼Œåˆ™å…³é—­å®šæ—¶å™¨ï¼Œå¹¶ä¸”æ‰§è¡Œå¤–é¢ä¼ è¿›æ¥çš„å›è°ƒï¼Œè¿›è€Œæ‰§è¡Œä¸‹ä¸€æ­¥æ“ä½œ
      clearInterval(timer)
      callback && callback()
    } else {
      let top = $stylePre.height() - MAX_HEIGHT
      if (top > 0) { // å½“å¡å…¥çš„å†…å®¹å·²ç»æ“ä½œäº†å®¹å™¨çš„é«˜åº¦ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€ä¸‹æ»šåŠ¨è·ç¦»æ‰æ–¹ä¾¿æ¼”ç¤ºæ¥ä¸‹æ¥çš„å†…å®¹
        goBottom(top)
      }
      $style.html(currentStyle)
      $stylePre.html(Prism.highlight(currentStyle, Prism.languages.css))
    }
  }, delay)
}


```
## stylesEditor(ç®€å†æ ·å¼ç¼–è¾‘æ¨¡å—)

> ç®€å†ç¼–è¾‘æ¨¡å—ç”¨æ¥å±•ç¤ºç®€å†å†…å®¹ï¼Œä¸»è¦ä¼šç»å†ç”±markdownæ ¼å¼å¾€htmlé¡µé¢å½¢å¼çš„è½¬æ¢ã€‚

```
const markdownToHtml = (callback) => {
  $resumeMarkdown.css({
    display: 'none'
  })
  $resumeWrap.addClass(iClass)
  $resumetag.html(marked(resumeMarkdown)) // å€ŸåŠ©markedå·¥å…·å°†markdownè½¬åŒ–ä¸ºhtml
  callback && callback() // æ‰§è¡Œåç»­çš„å›è°ƒ
}

const showResume = (callback) => { // åŸç†åŸºæœ¬ä¸ŠåŒstylesEditorï¼Œ ä¸æ–­åœ°å¾€ç®€å†ç¼–è¾‘çš„å®¹å™¨ä¸­å¡å…¥äº‹å…ˆå‡†å¤‡å¥½çš„ç®€å†å†…å®¹ï¼Œå½“å…¨éƒ¨å¡å…¥çš„æ—¶å€™å†å…³é—­å®šæ—¶å™¨ï¼Œå¹¶æ‰§è¡Œåç»­çš„å›è°ƒæ“ä½œ
  clearInterval(timer)
  timer = setInterval(() => {
    currentMarkdown += resumeMarkdown.substring(start, start + 1)
    if (currentMarkdown.length === length) {
      clearInterval(timer)
      callback && callback()
    } else {
      $resumeMarkdown.html(currentMarkdown)
      start++
    }
  }, delay)
}

```

## app(å…¥å£æ¨¡å—)

> æœ€åç”±appå…¥å£æ¨¡å—å°†ä»¥ä¸Šå‡ ä¸ªæ¨¡å—æ•´åˆå®Œæˆé¡¹ç›®çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬æ‰¾å‡ºå…¶ä¸­çš„æ ¸å¿ƒä»£ç æ¥, ğŸ˜€ï¼Œä½ æ²¡çœ‹é”™ï¼Œä¼ è¯´ä¸­çš„å›è°ƒåœ°ç‹±ï¼Œäº®çäº†æˆ‘çš„ç‹—çœ¼å•Šã€‚æƒ³å¿…å¤§å®¶å’Œæˆ‘ä¸€æ ·éƒ½æ˜¯ä¸æ„¿æ„çœ‹åˆ°è¿™å¨æ¶å¿ƒçš„ä»£ç çš„ï¼Œå•å¯¹äºå¤„ç†å¼‚æ­¥é—®é¢˜ï¼Œå›è°ƒåˆçš„ç¡®æ˜¯ä¸€ç›´ä»¥æ¥çš„è§£å†³æ–¹æ¡ˆä¹‹ä¸€ã€‚

**å› ä¸ºå®šæ—¶å™¨çš„æ“ä½œæ˜¯å¼‚æ­¥è¡Œä¸ºï¼Œè€Œæˆ‘ä»¬çš„ç®€å†ç”Ÿæˆè¿‡ç¨‹ä¼šæ¶‰åŠåˆ°å¤šä¸ªå¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸ºäº†çœ‹åˆ°å¦‚é¦–é¡µé¢„è§ˆé¡µé¢çš„æ•ˆæœï¼Œå¿…é¡»ç­‰å‰ä¸€ä¸ªæ­¥éª¤å®Œæˆä¹‹åï¼Œæ‰èƒ½æ‰§è¡Œä¸‹ä¸€æ­¥æ­¥éª¤ï¼Œè¿™é‡Œé¦–å…ˆä½¿ç”¨çš„å›è°ƒå‡½æ•°çš„è§£å†³æ–¹æ¡ˆï¼Œå¤§å®¶å¯ä»¥ä»githubä¸Šæ‹‰å–ä»£ç ï¼Œåˆ†åˆ«åˆ‡æ¢ä»¥ä¸‹å‡ ä¸ªåˆ†æ”¯æ¥æŸ¥çœ‹ä¸åŒçš„è§£å†³æ–¹æ¡ˆ**

1. master(ä½¿ç”¨å›è°ƒå‡½æ•°å¤„ç†)
2. promise(ä½¿ç”¨promiseå¤„ç†)
3. generator-thunk(ä½¿ç”¨generator + thunkå‡½æ•°å¤„ç†)
4. generator-promise(ä½¿ç”¨generator + promiseå¤„ç†)
5. async(ä½¿ç”¨asyncå¤„ç†)

![](http://odssgnnpf.bkt.clouddn.com/400-5.jpg)

```javascript
showStyles(0, () => {
  showResume(() => {
    showStyles(1, () => {
      markdownToHtml(() => {
        showStyles(2)
      })
    })
  })
})


```